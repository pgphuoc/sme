<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L·ªô tr√¨nh H·ªçc Odoo cho Junior</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Harmony (Slate/White neutrals with a muted Blue accent) -->
    <!-- Application Structure Plan: A single-page "Learning Pathway" design. A fixed vertical navigation on the left allows users to jump to key topics (Architecture, Flows, Security, Module Building, Project). This non-linear structure aids self-paced learning and quick reference, which is more effective for a technical guide than a simple document scroll. Content for each topic is loaded into the main panel, using interactive elements like clickable diagrams and tabbed code viewers to enhance engagement and understanding. -->
    <!-- Visualization & Content Choices:
        - Report Info: 3-Tier Architecture -> Goal: Inform -> Viz: 3-column interactive card layout (HTML/CSS) -> Interaction: Hover to show details. Justification: More visually engaging than a list. Library: None.
        - Report Info: O2C & P2P Flows -> Goal: Organize/Show Change -> Viz: Step-by-step process flow diagrams (HTML/CSS) -> Interaction: Click a step to highlight and see details. Justification: Breaks down complex processes into digestible, interactive steps, replacing static Mermaid diagrams. Library: None.
        - Report Info: Security Layers -> Goal: Inform/Compare -> Viz: Layered "funnel" diagram (HTML/CSS) and tabbed content for examples -> Interaction: Click a layer to view code/explanation. Justification: Visualizes the hierarchy of security checks effectively. Library: None.
        - Report Info: User Types -> Goal: Inform -> Viz: Doughnut Chart -> Interaction: Hover to see labels. Justification: Adds visual variety and quickly illustrates the concept of different user scopes. Library: Chart.js.
        - Report Info: Code examples -> Goal: Instruct -> Viz: Tabbed code viewers with syntax highlighting style and copy buttons -> Interaction: Switch tabs to see different files, click to copy code. Justification: Simulates an IDE, making code easy to read and use. Library: Vanilla JS for interaction.
        -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body { font-family: 'Inter', sans-serif; }
        .content-section { display: none; }
        .content-section.active { display: block; }
        .nav-link { transition: all 0.2s ease-in-out; }
        .nav-link.active { background-color: #EBF4FF; color: #2C5282; font-weight: 600; }
        .code-block {
            background-color: #2d3748;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            position: relative;
        }
        .copy-btn {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background-color: #4a5568;
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.8rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .copy-btn:hover { background-color: #718096; }
        .tab-btn.active { border-bottom: 2px solid #3B82F6; color: #3B82F6; font-weight: 600; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .flow-step { cursor: pointer; transition: all 0.3s ease; }
        .flow-step.active {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            border-color: #3B82F6;
        }
        .flow-arrow {
            font-size: 2rem;
            color: #9CA3AF;
            line-height: 1;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <div class="flex h-screen">
        <!-- Sidebar Navigation -->
        <aside class="w-64 bg-white border-r border-slate-200 p-4 flex-shrink-0">
            <h1 class="text-xl font-bold text-slate-900 mb-8">L·ªô tr√¨nh H·ªçc Odoo</h1>
            <nav id="main-nav" class="space-y-2">
                <a href="#intro" class="nav-link flex items-center px-4 py-2 text-slate-600 rounded-md hover:bg-slate-100">
                    <span class="mr-3">üëã</span> Gi·ªõi thi·ªáu
                </a>
                <a href="#architecture" class="nav-link flex items-center px-4 py-2 text-slate-600 rounded-md hover:bg-slate-100">
                    <span class="mr-3">üèõÔ∏è</span> Ki·∫øn tr√∫c H·ªá th·ªëng
                </a>
                 <a href="#flows" class="nav-link flex items-center px-4 py-2 text-slate-600 rounded-md hover:bg-slate-100">
                    <span class="mr-3">üåä</span> Lu·ªìng Nghi·ªáp v·ª•
                </a>
                <a href="#security" class="nav-link flex items-center px-4 py-2 text-slate-600 rounded-md hover:bg-slate-100">
                    <span class="mr-3">üõ°Ô∏è</span> Qu·∫£n l√Ω Ph√¢n quy·ªÅn
                </a>
                <a href="#module-building" class="nav-link flex items-center px-4 py-2 text-slate-600 rounded-md hover:bg-slate-100">
                    <span class="mr-3">üß±</span> X√¢y d·ª±ng Module
                </a>
                <a href="#project" class="nav-link flex items-center px-4 py-2 text-slate-600 rounded-md hover:bg-slate-100">
                    <span class="mr-3">üöÄ</span> D·ª± √°n Th·ª±c t·∫ø
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 overflow-y-auto p-8 lg:p-12">
            <div id="intro" class="content-section">
                <h2 class="text-3xl font-bold text-slate-900 mb-4">Ch√†o m·ª´ng ƒë·∫øn v·ªõi H∆∞·ªõng d·∫´n Odoo To√†n di·ªán</h2>
                <p class="text-lg text-slate-600 mb-6">T√†i li·ªáu n√†y ƒë∆∞·ª£c bi√™n so·∫°n nh·∫±m cung c·∫•p m·ªôt l·ªô tr√¨nh h·ªçc t·∫≠p v√† ph√°t tri·ªÉn to√†n di·ªán cho c√°c l·∫≠p tr√¨nh vi√™n Odoo ·ªü c·∫•p ƒë·ªô junior. M·ª•c ti√™u l√† trang b·ªã cho b·∫°n kh√¥ng ch·ªâ ki·∫øn th·ª©c "l√†m th·∫ø n√†o" (how-to) m√† c√≤n c·∫£ s·ª± hi·ªÉu bi·∫øt s√¢u s·∫Øc v·ªÅ "t·∫°i sao" (why), gi√∫p b·∫°n x√¢y d·ª±ng n·ªÅn t·∫£ng v·ªØng ch·∫Øc ƒë·ªÉ tr·ªü th√†nh m·ªôt chuy√™n gia Odoo trong t∆∞∆°ng lai.</p>
                <div class="bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-4 rounded-md" role="alert">
                    <p class="font-bold">B·∫Øt ƒë·∫ßu h√†nh tr√¨nh c·ªßa b·∫°n</p>
                    <p>H√£y s·ª≠ d·ª•ng thanh ƒëi·ªÅu h∆∞·ªõng b√™n tr√°i ƒë·ªÉ kh√°m ph√° c√°c ch·ªß ƒë·ªÅ, t·ª´ ki·∫øn tr√∫c t·ªïng quan, qu·∫£n l√Ω b·∫£o m·∫≠t, ƒë·∫øn quy tr√¨nh ph√°t tri·ªÉn module v√† m·ªôt d·ª± √°n th·ª±c t·∫ø ƒë·ªÉ √°p d·ª•ng t·∫•t c·∫£ ki·∫øn th·ª©c ƒë√£ h·ªçc.</p>
                </div>
            </div>

            <div id="architecture" class="content-section">
                <h2 class="text-3xl font-bold text-slate-900 mb-2">Ki·∫øn tr√∫c H·ªá th·ªëng Odoo</h2>
                 <p class="text-lg text-slate-600 mb-8">ƒê·ªÉ ph√°t tri·ªÉn hi·ªáu qu·∫£, vi·ªác ƒë·∫ßu ti√™n v√† quan tr·ªçng nh·∫•t l√† ph·∫£i hi·ªÉu r√µ ki·∫øn tr√∫c n·ªÅn t·∫£ng c·ªßa Odoo. Odoo ƒë∆∞·ª£c x√¢y d·ª±ng d·ª±a tr√™n ki·∫øn tr√∫c 3 l·ªõp, m·ªôt m√¥ h√¨nh ph√¢n chia ·ª©ng d·ª•ng th√†nh ba t·∫ßng logic v√† v·∫≠t l√Ω ri√™ng bi·ªát, ƒë·∫£m b·∫£o t√≠nh linh ho·∫°t, kh·∫£ nƒÉng m·ªü r·ªông v√† b·∫£o tr√¨.</p>
                
                <div class="grid md:grid-cols-3 gap-8 text-center">
                    <div class="bg-white p-6 rounded-lg shadow-md border border-slate-200">
                        <div class="text-4xl mb-4">üñ•Ô∏è</div>
                        <h3 class="text-xl font-semibold mb-2 text-slate-900">T·∫ßng Tr√¨nh b√†y (Presentation)</h3>
                        <p class="text-slate-600">Giao di·ªán ng∆∞·ªùi d√πng ch·∫°y tr√™n tr√¨nh duy·ªát. S·ª≠ d·ª•ng JavaScript (Owl Framework), HTML, CSS ƒë·ªÉ hi·ªÉn th·ªã d·ªØ li·ªáu v√† g·ª≠i y√™u c·∫ßu ng∆∞·ªùi d√πng ƒë·∫øn m√°y ch·ªß qua JSON-RPC.</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md border border-slate-200">
                         <div class="text-4xl mb-4">‚öôÔ∏è</div>
                        <h3 class="text-xl font-semibold mb-2 text-slate-900">T·∫ßng ·ª®ng d·ª•ng (Application)</h3>
                        <p class="text-slate-600">"B·ªô n√£o" c·ªßa Odoo, vi·∫øt b·∫±ng Python. Ch·ª©a to√†n b·ªô logic nghi·ªáp v·ª•, quy tr√¨nh x·ª≠ l√Ω v√† ƒë·∫∑c bi·ªát l√† b·ªô m√°y ORM (Object-Relational Mapping) m·∫°nh m·∫Ω ƒë·ªÉ giao ti·∫øp v·ªõi c∆° s·ªü d·ªØ li·ªáu.</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md border border-slate-200">
                        <div class="text-4xl mb-4">üíæ</div>
                        <h3 class="text-xl font-semibold mb-2 text-slate-900">T·∫ßng D·ªØ li·ªáu (Data)</h3>
                        <p class="text-slate-600">H·ªá qu·∫£n tr·ªã c∆° s·ªü d·ªØ li·ªáu PostgreSQL. Ch·ªãu tr√°ch nhi·ªám l∆∞u tr·ªØ, truy xu·∫•t v√† qu·∫£n l√Ω to√†n b·ªô d·ªØ li·ªáu ·ª©ng d·ª•ng v√† c·∫•u h√¨nh h·ªá th·ªëng m·ªôt c√°ch b·ªÅn v·ªØng v√† an to√†n.</p>
                    </div>
                </div>

                <h3 class="text-2xl font-bold text-slate-900 mt-12 mb-4">M√¥ h√¨nh Model-View-Controller (MVC)</h3>
                <p class="text-slate-600 mb-6">B√™n trong T·∫ßng ·ª®ng d·ª•ng, Odoo s·ª≠ d·ª•ng m·∫´u thi·∫øt k·∫ø MVC ƒë·ªÉ t·ªï ch·ª©c m√£ ngu·ªìn m·ªôt c√°ch hi·ªáu qu·∫£. ƒê·ª´ng nh·∫ßm l·∫´n MVC v·ªõi ki·∫øn tr√∫c 3 l·ªõp: ki·∫øn tr√∫c 3 l·ªõp l√† b·∫£n thi·∫øt k·∫ø c·ªßa t√≤a nh√†, c√≤n MVC l√† c√°ch b·ªë tr√≠ c√°c ph√≤ng b√™n trong.</p>
                <div class="bg-white p-6 rounded-lg shadow-md border border-slate-200">
                    <ul class="space-y-4">
                        <li><strong><span class="font-semibold text-blue-600">Model:</span></strong> C√°c l·ªõp Python k·∫ø th·ª´a t·ª´ `models.Model`, ƒë·∫°i di·ªán cho c·∫•u tr√∫c d·ªØ li·ªáu v√† logic nghi·ªáp v·ª•. ORM s·∫Ω √°nh x·∫° ch√∫ng th√†nh c√°c b·∫£ng trong database.</li>
                        <li><strong><span class="font-semibold text-green-600">View:</span></strong> C√°c t·ªáp XML ƒë·ªãnh nghƒ©a giao di·ªán ng∆∞·ªùi d√πng (Form, List, Kanban...). Odoo ƒë·ªçc XML v√† sinh ra HTML t∆∞∆°ng ·ª©ng.</li>
                        <li><strong><span class="font-semibold text-amber-600">Controller:</span></strong> C√°c ph∆∞∆°ng th·ª©c trong Model, x·ª≠ l√Ω t∆∞∆°ng t√°c c·ªßa ng∆∞·ªùi d√πng, thao t√°c d·ªØ li·ªáu v√† quy·∫øt ƒë·ªãnh View n√†o s·∫Ω hi·ªÉn th·ªã ti·∫øp theo.</li>
                    </ul>
                </div>
            </div>

            <div id="flows" class="content-section">
                <h2 class="text-3xl font-bold text-slate-900 mb-2">Lu·ªìng Nghi·ªáp v·ª• C·ªët l√µi</h2>
                <p class="text-lg text-slate-600 mb-8">S·ª©c m·∫°nh c·ªßa Odoo n·∫±m ·ªü s·ª± t√≠ch h·ª£p li·ªÅn m·∫°ch gi·ªØa c√°c module. M·ªôt h√†nh ƒë·ªông c√≥ th·ªÉ k√≠ch ho·∫°t m·ªôt chu·ªói quy tr√¨nh t·ª± ƒë·ªông. H√£y kh√°m ph√° hai lu·ªìng nghi·ªáp v·ª• quan tr·ªçng nh·∫•t: T·ª´ B√°n h√†ng ƒë·∫øn Thu ti·ªÅn (O2C) v√† T·ª´ Mua h√†ng ƒë·∫øn Thanh to√°n (P2P).</p>
                
                <div id="flow-container">
                    <!-- Flow content will be injected here by JS -->
                </div>
            </div>
            
            <div id="security" class="content-section">
                <h2 class="text-3xl font-bold text-slate-900 mb-2">Qu·∫£n l√Ω Ng∆∞·ªùi d√πng & Ph√¢n quy·ªÅn</h2>
                <p class="text-lg text-slate-600 mb-8">B·∫£o m·∫≠t l√† kh√≠a c·∫°nh t·ªëi quan tr·ªçng. Odoo cung c·∫•p m·ªôt c∆° ch·∫ø ph√¢n quy·ªÅn ƒëa l·ªõp m·∫°nh m·∫Ω. Hi·ªÉu r√µ c∆° ch·∫ø n√†y l√† y√™u c·∫ßu b·∫Øt bu·ªôc ƒë·ªëi v·ªõi m·ªçi l·∫≠p tr√¨nh vi√™n.</p>

                <div class="grid md:grid-cols-2 gap-8">
                    <div>
                        <h3 class="text-2xl font-bold text-slate-900 mb-4">C√°c L·ªõp B·∫£o m·∫≠t</h3>
                        <p class="text-slate-600 mb-6">M·ªôt y√™u c·∫ßu truy c·∫≠p d·ªØ li·ªáu c·ªßa ng∆∞·ªùi d√πng ph·∫£i ƒëi qua nhi·ªÅu "c√°nh c·ªïng" b·∫£o m·∫≠t. N·∫øu b·ªã ch·∫∑n ·ªü b·∫•t k·ª≥ c·ªïng n√†o, y√™u c·∫ßu s·∫Ω b·ªã t·ª´ ch·ªëi.</p>
                        <div id="security-layers" class="space-y-4">
                            <!-- Security layers will be injected by JS -->
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md border border-slate-200">
                        <h3 class="text-xl font-semibold text-slate-900 mb-4">Ph√¢n lo·∫°i Ng∆∞·ªùi d√πng Odoo</h3>
                        <p class="text-slate-600 mb-4">Odoo ph√¢n bi·ªát 3 lo·∫°i ng∆∞·ªùi d√πng ch√≠nh, m·ªói lo·∫°i c√≥ m·ªôt m·ª©c ƒë·ªô truy c·∫≠p kh√°c nhau.</p>
                        <div class="chart-container relative h-64 md:h-80 w-full max-w-sm mx-auto">
                            <canvas id="userTypesChart"></canvas>
                        </div>
                    </div>
                </div>

                <div id="security-details" class="mt-8 bg-white p-6 rounded-lg shadow-md border border-slate-200">
                     <!-- Security details will be injected by JS -->
                </div>
            </div>
            
            <div id="module-building" class="content-section">
                <h2 class="text-3xl font-bold text-slate-900 mb-2">X√¢y d·ª±ng m·ªôt Module Odoo t·ª´ A-Z</h2>
                <p class="text-lg text-slate-600 mb-8">Ph·∫ßn n√†y s·∫Ω h∆∞·ªõng d·∫´n b·∫°n t·ª´ng b∆∞·ªõc ƒë·ªÉ t·∫°o ra m·ªôt module Odoo ho√†n ch·ªânh t·ª´ ƒë·∫ßu, t·ª´ c·∫•u tr√∫c th∆∞ m·ª•c ƒë·∫øn vi·ªác hi·ªÉn th·ªã module tr√™n giao di·ªán ng∆∞·ªùi d√πng.</p>
                <div id="module-steps-container">
                    <!-- Module building steps will be injected by JS -->
                </div>
            </div>
            
            <div id="project" class="content-section">
                <h2 class="text-3xl font-bold text-slate-900 mb-2">D·ª± √°n Th·ª±c t·∫ø: Module "Mua h√†ng" T√πy ch·ªânh</h2>
                 <p class="text-lg text-slate-600 mb-8">√Åp d·ª•ng t·∫•t c·∫£ c√°c kh√°i ni·ªám ƒë√£ h·ªçc ƒë·ªÉ x√¢y d·ª±ng m·ªôt phi√™n b·∫£n ƒë∆°n gi·∫£n c·ªßa module Mua h√†ng. H√£y kh√°m ph√° c√°ch c√°c th√†nh ph·∫ßn kh√°c nhau k·∫øt h·ª£p l·∫°i ƒë·ªÉ t·∫°o th√†nh m·ªôt ·ª©ng d·ª•ng ho√†n ch·ªânh.</p>
                 <div class="bg-white rounded-lg shadow-md border border-slate-200">
                    <div id="project-tabs" class="border-b border-slate-200">
                        <!-- Project tabs will be injected by JS -->
                    </div>
                    <div id="project-content" class="p-6">
                        <!-- Project content will be injected by JS -->
                    </div>
                 </div>
            </div>

        </main>
    </div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const navLinks = document.querySelectorAll('#main-nav a');
    const contentSections = document.querySelectorAll('.content-section');

    function updateContent(hash) {
        hash = hash || window.location.hash || '#intro';

        navLinks.forEach(link => {
            if (link.getAttribute('href') === hash) {
                link.classList.add('active');
            } else {
                link.classList.remove('active');
            }
        });

        contentSections.forEach(section => {
            if ('#' + section.id === hash) {
                section.classList.add('active');
            } else {
                section.classList.remove('active');
            }
        });
        
        // Lazy load content
        if (hash === '#architecture' && !document.querySelector('#architecture').dataset.loaded) {
            document.querySelector('#architecture').dataset.loaded = 'true';
        }
        if (hash === '#flows' && !document.querySelector('#flows').dataset.loaded) {
            initFlows();
            document.querySelector('#flows').dataset.loaded = 'true';
        }
        if (hash === '#security' && !document.querySelector('#security').dataset.loaded) {
            initSecuritySection();
            document.querySelector('#security').dataset.loaded = 'true';
        }
        if (hash === '#module-building' && !document.querySelector('#module-building').dataset.loaded) {
            initModuleBuildingSection();
            document.querySelector('#module-building').dataset.loaded = 'true';
        }
        if (hash === '#project' && !document.querySelector('#project').dataset.loaded) {
            initProjectSection();
            document.querySelector('#project').dataset.loaded = 'true';
        }
    }

    navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const hash = this.getAttribute('href');
            history.pushState(null, null, hash);
            updateContent(hash);
        });
    });

    window.addEventListener('popstate', () => updateContent(window.location.hash));
    updateContent(); 

    function initFlows() {
        const container = document.getElementById('flow-container');
        const flows = {
            o2c: {
                title: "Lu·ªìng Order-to-Cash (O2C) - T·ª´ B√°n h√†ng ƒë·∫øn Thu ti·ªÅn",
                steps: [
                    { title: "T·∫°o ƒê∆°n h√†ng", model: "sale.order", icon: "üìù", details: "Nh√¢n vi√™n kinh doanh x√°c nh·∫≠n b√°o gi√° v√† t·∫°o m·ªôt ƒê∆°n h√†ng. ƒê√¢y l√† ƒëi·ªÉm kh·ªüi ƒë·∫ßu c·ªßa quy tr√¨nh b√°n h√†ng." },
                    { title: "T·∫°o L·ªánh Giao h√†ng", model: "stock.picking", icon: "üöö", details: "H·ªá th·ªëng t·ª± ƒë·ªông t·∫°o L·ªánh Giao h√†ng ƒë·ªÉ gi·ªØ tr∆∞·ªõc (reserve) h√†ng h√≥a trong kho. T·ªìn kho ch∆∞a b·ªã tr·ª´ t·∫°i b∆∞·ªõc n√†y." },
                    { title: "C·∫≠p nh·∫≠t T·ªìn kho", model: "stock.move", icon: "üì¶", details: "Nh√¢n vi√™n kho x√°c nh·∫≠n L·ªánh Giao h√†ng. Ch·ªâ t·∫°i th·ªùi ƒëi·ªÉm n√†y, s·ªë l∆∞·ª£ng t·ªìn kho th·ª±c t·∫ø m·ªõi b·ªã tr·ª´ ƒëi." },
                    { title: "T·∫°o H√≥a ƒë∆°n", model: "account.move", icon: "üßæ", details: "D·ª±a tr√™n ch√≠nh s√°ch, h·ªá th·ªëng t·∫°o ra m·ªôt H√≥a ƒë∆°n kh√°ch h√†ng trong module K·∫ø to√°n." },
                    { title: "Ghi nh·∫≠n Thanh to√°n", model: "account.payment", icon: "üí∞", details: "K·∫ø to√°n vi√™n ghi nh·∫≠n thanh to√°n t·ª´ kh√°ch h√†ng v√† ƒë·ªëi so√°t n√≥ v·ªõi h√≥a ƒë∆°n, ho√†n t·∫•t quy tr√¨nh." }
                ]
            },
            p2p: {
                title: "Lu·ªìng Procure-to-Pay (P2P) - T·ª´ Mua h√†ng ƒë·∫øn Thanh to√°n",
                steps: [
                    { title: "T·∫°o ƒê∆°n mua h√†ng", model: "purchase.order", icon: "üõí", details: "Nh√¢n vi√™n mua h√†ng t·∫°o v√† x√°c nh·∫≠n m·ªôt ƒê∆°n mua h√†ng v·ªõi nh√† cung c·∫•p." },
                    { title: "T·∫°o L·ªánh Nh·∫≠n h√†ng", model: "stock.picking", icon: "üì•", details: "H·ªá th·ªëng t·ª± ƒë·ªông t·∫°o L·ªánh Nh·∫≠n h√†ng ƒë·ªÉ chu·∫©n b·ªã cho vi·ªác nh·∫≠p h√†ng h√≥a v√†o kho." },
                    { title: "C·∫≠p nh·∫≠t T·ªìn kho", model: "stock.move", icon: "üì¶", details: "Khi h√†ng v·ªÅ, nh√¢n vi√™n kho x√°c nh·∫≠n L·ªánh Nh·∫≠n h√†ng, l√†m tƒÉng s·ªë l∆∞·ª£ng t·ªìn kho c·ªßa s·∫£n ph·∫©m." },
                    { title: "T·∫°o H√≥a ƒë∆°n NCC", model: "account.move", icon: "üßæ", details: "H·ªá th·ªëng t·∫°o ra m·ªôt H√≥a ƒë∆°n nh√† cung c·∫•p trong K·∫ø to√°n, ch·ªù ƒë∆∞·ª£c thanh to√°n." },
                    { title: "Th·ª±c hi·ªán Thanh to√°n", model: "account.payment", icon: "üí≥", details: "K·∫ø to√°n vi√™n th·ª±c hi·ªán thanh to√°n cho nh√† cung c·∫•p v√† ƒë·ªëi so√°t giao d·ªãch, k·∫øt th√∫c quy tr√¨nh." }
                ]
            }
        };

        let html = '';
        for (const key in flows) {
            const flow = flows[key];
            html += `<div class="mb-12">
                <h3 class="text-2xl font-bold text-slate-900 mb-6">${flow.title}</h3>
                <div class="relative">
                    <div class="flex items-center justify-between space-x-2 md:space-x-4">
                        ${flow.steps.map((step, index) => `
                            <div class="flow-step flex-1 bg-white p-4 rounded-lg shadow-md border-2 border-transparent" data-flow="${key}" data-step="${index}">
                                <div class="text-3xl mb-2">${step.icon}</div>
                                <h4 class="font-semibold text-sm md:text-base">${step.title}</h4>
                                <p class="text-xs text-slate-500 hidden md:block">${step.model}</p>
                            </div>
                            ${index < flow.steps.length - 1 ? `<div class="flow-arrow text-slate-300 mx-1 md:mx-2">‚Üí</div>` : ''}
                        `).join('')}
                    </div>
                    <div id="flow-details-${key}" class="mt-4 p-4 bg-blue-50 rounded-md border border-blue-200 text-blue-800 hidden"></div>
                </div>
            </div>`;
        }
        container.innerHTML = html;
        
        document.querySelectorAll('.flow-step').forEach(stepEl => {
            stepEl.addEventListener('click', () => {
                const flowKey = stepEl.dataset.flow;
                const stepIndex = parseInt(stepEl.dataset.step);

                document.querySelectorAll(`.flow-step[data-flow="${flowKey}"]`).forEach(el => el.classList.remove('active'));
                stepEl.classList.add('active');

                const detailsContainer = document.getElementById(`flow-details-${flowKey}`);
                detailsContainer.innerHTML = `<p><strong>${flows[flowKey].steps[stepIndex].title}:</strong> ${flows[flowKey].steps[stepIndex].details}</p>`;
                detailsContainer.style.display = 'block';
            });
        });
    }

    function initSecuritySection() {
        const layersContainer = document.getElementById('security-layers');
        const detailsContainer = document.getElementById('security-details');

        const layers = [
            { id: 'acl', title: 'L·ªõp 1: Access Control List (ACLs)', description: 'Ki·ªÉm so√°t quy·ªÅn truy c·∫≠p Read, Write, Create, Unlink tr√™n to√†n b·ªô Model.', icon: 'üîë', file: 'ir.model.access.csv' },
            { id: 'record', title: 'L·ªõp 2: Record Rules', description: 'L·ªçc c√°c b·∫£n ghi c·ª• th·ªÉ m√† ng∆∞·ªùi d√πng ƒë∆∞·ª£c ph√©p xem/s·ª≠a.', icon: 'üîé', file: 'security.xml' },
            { id: 'field', title: 'L·ªõp 3: Field & View Level', description: '·∫®n/hi·ªán c√°c tr∆∞·ªùng, n√∫t b·∫•m, menu tr√™n giao di·ªán ng∆∞·ªùi d√πng.', icon: 'üëÅÔ∏è', file: 'views.xml / models.py' },
        ];
        
        const details = {
            acl: {
                title: 'V√≠ d·ª•: ir.model.access.csv',
                explanation: 'T·ªáp CSV n√†y c·∫•p quy·ªÅn cho m·ªôt nh√≥m ng∆∞·ªùi d√πng. C·ªôt `group_id:id` x√°c ƒë·ªãnh nh√≥m, c√°c c·ªôt `perm_*` x√°c ƒë·ªãnh quy·ªÅn (1=cho ph√©p, 0=t·ª´ ch·ªëi). Lu√¥n ch·ªâ ƒë·ªãnh nh√≥m c·ª• th·ªÉ ƒë·ªÉ tr√°nh r√≤ r·ªâ d·ªØ li·ªáu.',
                codeLang: 'csv',
                code: `id,name,model_id:id,group_id:id,perm_read,perm_write,perm_create,perm_unlink
access_custom_po_user,po.user,model_custom_purchase_order,my_module.group_purchase_user,1,1,1,0
access_custom_po_manager,po.manager,model_custom_purchase_order,my_module.group_purchase_manager,1,1,1,1`
            },
            record: {
                title: 'V√≠ d·ª•: Record Rule trong security.xml',
                explanation: 'Rule n√†y d√πng m·ªôt `domain_force` ƒë·ªÉ l·ªçc d·ªØ li·ªáu. V√≠ d·ª• n√†y ch·ªâ cho ph√©p ng∆∞·ªùi d√πng th·∫•y c√°c ƒë∆°n h√†ng do ch√≠nh h·ªç t·∫°o ra (`user_id` b·∫±ng v·ªõi `user.id` c·ªßa ng∆∞·ªùi ƒëƒÉng nh·∫≠p).',
                codeLang: 'xml',
                code: `<record id="purchase_order_user_rule" model="ir.rule">
    <field name="name">Purchase Order User Rule</field>
    <field name="model_id" ref="model_custom_purchase_order"/>
    <field name="domain_force">[('user_id', '=', user.id)]</field>
    <field name="groups" eval="[(4, ref('my_module.group_purchase_user'))]"/>
</record>`
            },
            field: {
                title: 'V√≠ d·ª•: Ph√¢n quy·ªÅn tr√™n View v√† Field',
                explanation: 'Thu·ªôc t√≠nh `groups` c√≥ th·ªÉ ƒë∆∞·ª£c d√πng trong XML ƒë·ªÉ ·∫©n/hi·ªán c√°c th√†nh ph·∫ßn giao di·ªán, ho·∫∑c trong Python ƒë·ªÉ b·∫£o v·ªá tr∆∞·ªùng d·ªØ li·ªáu ·ªü c·∫•p ƒë·ªô ORM, ƒë·∫£m b·∫£o an to√†n tuy·ªát ƒë·ªëi.',
                codeLang: 'xml',
                code: `<!-- Trong XML View -->
<button name="action_approve" string="Approve"
    groups="my_module.group_purchase_manager"
    type="object"/>

<!-- Trong Python Model -->
salary = fields.Float(string="Salary", groups="hr.group_hr_manager")`
            }
        };

        layersContainer.innerHTML = layers.map((layer, index) => `
            <div id="layer-btn-${layer.id}" class="security-layer-btn p-4 bg-white rounded-lg shadow-sm border flex items-center cursor-pointer hover:shadow-lg hover:border-blue-500 transition-all duration-300" style="margin-left: ${index * 2}rem;">
                <span class="text-3xl mr-4">${layer.icon}</span>
                <div>
                    <h4 class="font-semibold text-slate-900">${layer.title}</h4>
                    <p class="text-slate-500 text-sm">${layer.description}</p>
                </div>
                <span class="ml-auto text-xs font-mono bg-slate-100 text-slate-600 px-2 py-1 rounded">${layer.file}</span>
            </div>
            ${index < layers.length - 1 ? `<div class="text-center text-slate-400 text-2xl" style="margin-left: ${index * 2 + 1}rem;">‚Üì</div>` : ''}
        `).join('');

        function showDetails(layerId) {
            const detail = details[layerId];
            detailsContainer.innerHTML = `
                <h4 class="text-xl font-semibold text-slate-900 mb-3">${detail.title}</h4>
                <p class="text-slate-600 mb-4">${detail.explanation}</p>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code class="language-${detail.codeLang}">${escapeHtml(detail.code)}</code></pre>
                </div>
            `;
            document.querySelectorAll('.security-layer-btn').forEach(btn => btn.classList.remove('bg-blue-50', 'border-blue-500'));
            document.getElementById(`layer-btn-${layerId}`).classList.add('bg-blue-50', 'border-blue-500');
        }

        document.querySelectorAll('.security-layer-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const layerId = btn.id.replace('layer-btn-', '');
                showDetails(layerId);
            });
        });
        showDetails('acl');
        
        new Chart(document.getElementById('userTypesChart'), {
            type: 'doughnut',
            data: {
                labels: ['Internal User (Nh√¢n vi√™n)', 'Portal User (Kh√°ch h√†ng)', 'Public User (C√¥ng khai)'],
                datasets: [{
                    label: 'Ph√¢n lo·∫°i ng∆∞·ªùi d√πng',
                    data: [65, 25, 10],
                    backgroundColor: ['#3B82F6', '#10B981', '#F59E0B'],
                    hoverOffset: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                if (context.parsed !== null) {
                                    label += context.parsed + '% (∆∞·ªõc t√≠nh)';
                                }
                                return label;
                            }
                        }
                    }
                }
            }
        });
    }

    function initModuleBuildingSection() {
        const container = document.getElementById('module-steps-container');
        const steps = [
            { 
                title: 'B∆∞·ªõc 1: C·∫•u tr√∫c Th∆∞ m·ª•c', 
                description: 'T·∫°o c·∫•u tr√∫c th∆∞ m·ª•c chu·∫©n. Odoo d·ª±a v√†o c·∫•u tr√∫c n√†y ƒë·ªÉ nh·∫≠n di·ªán v√† t·∫£i module.',
                codeLang: 'bash',
                code: `custom_module/
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ __manifest__.py
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ custom_model.py
‚îú‚îÄ‚îÄ views/
‚îÇ   ‚îî‚îÄ‚îÄ custom_view.xml
‚îî‚îÄ‚îÄ security/
    ‚îî‚îÄ‚îÄ ir.model.access.csv`
            },
            { 
                title: 'B∆∞·ªõc 2: T·ªáp __manifest__.py', 
                description: 'Khai b√°o si√™u d·ªØ li·ªáu c·ªßa module. Kh√≥a `data` r·∫•t quan tr·ªçng, Odoo t·∫£i c√°c t·ªáp theo ƒë√∫ng th·ª© t·ª± n√†y.',
                codeLang: 'python',
                code: `{
    'name': 'My Custom Module',
    'version': '1.0.0',
    'depends': ['base'],
    'data': [
        'security/ir.model.access.csv',
        'views/custom_view.xml',
    ],
    'application': True,
}`
            },
            { 
                title: 'B∆∞·ªõc 3: ƒê·ªãnh nghƒ©a Model', 
                description: 'T·∫°o l·ªõp Python k·∫ø th·ª´a t·ª´ `models.Model` ƒë·ªÉ ƒë·ªãnh nghƒ©a ƒë·ªëi t∆∞·ª£ng nghi·ªáp v·ª•. ORM s·∫Ω t·ª± ƒë·ªông t·∫°o b·∫£ng trong DB.',
                codeLang: 'python',
                code: `from odoo import models, fields

class CustomModel(models.Model):
    _name = 'custom.model'
    _description = 'My Custom Model'

    name = fields.Char(string='Name', required=True)
    active = fields.Boolean(default=True)`
            },
            { 
                title: 'B∆∞·ªõc 4: ƒê·ªãnh nghƒ©a View', 
                description: 'S·ª≠ d·ª•ng XML ƒë·ªÉ t·∫°o giao di·ªán ng∆∞·ªùi d√πng (List view v√† Form view). M·ªói view l√† m·ªôt b·∫£n ghi c·ªßa `ir.ui.view`.',
                codeLang: 'xml',
                code: `<odoo>
    <record id="view_custom_model_tree" model="ir.ui.view">
        <field name="name">custom.model.tree</field>
        <field name="model">custom.model</field>
        <field name="arch" type="xml">
            <tree><field name="name"/></tree>
        </field>
    </record>
</odoo>`
            },
             { 
                title: 'B∆∞·ªõc 5: Actions & Menus', 
                description: 'T·∫°o Window Action ƒë·ªÉ li√™n k·∫øt model v·ªõi view, v√† Menu Item ƒë·ªÉ ng∆∞·ªùi d√πng c√≥ th·ªÉ truy c·∫≠p.',
                codeLang: 'xml',
                code: `<record id="action_custom_model" model="ir.actions.act_window">
    <field name="name">Custom Models</field>
    <field name="res_model">custom.model</field>
    <field name="view_mode">tree,form</field>
</record>

<menuitem id="menu_custom_root" name="My App"/>
<menuitem id="menu_custom_model" name="My Models"
    parent="menu_custom_root" action="action_custom_model"/>`
            },
             { 
                title: 'B∆∞·ªõc 6: C√†i ƒë·∫∑t', 
                description: 'Kh·ªüi ƒë·ªông l·∫°i server Odoo, b·∫≠t ch·∫ø ƒë·ªô Developer, v√†o Apps > Update Apps List, t√¨m v√† c√†i ƒë·∫∑t module c·ªßa b·∫°n.',
                codeLang: 'bash',
                code: `# 1. Restart Odoo server
# 2. Activate Developer Mode
# 3. Go to Apps menu
# 4. Click Update Apps List
# 5. Search for "My Custom Module" and click Install`
            }
        ];

        container.innerHTML = steps.map((step, index) => `
            <div class="bg-white p-6 rounded-lg shadow-md border border-slate-200 mb-6">
                <h3 class="text-2xl font-bold text-slate-900 mb-3">${step.title}</h3>
                <p class="text-slate-600 mb-4">${step.description}</p>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code class="language-${step.codeLang}">${escapeHtml(step.code)}</code></pre>
                </div>
            </div>
        `).join('');
    }

    function initProjectSection() {
        const tabsContainer = document.getElementById('project-tabs');
        const contentContainer = document.getElementById('project-content');

        const files = {
            models: { 
                name: 'models/custom_purchase.py',
                lang: 'python',
                code: `from odoo import models, fields, api

class CustomPurchaseOrder(models.Model):
    _name = 'custom.purchase.order'
    _inherit = ['mail.thread']
    _description = 'Custom Purchase Order'

    name = fields.Char(string='Order Reference', required=True, copy=False, readonly=True, default=lambda self: 'New')
    partner_id = fields.Many2one('res.partner', string='Vendor', required=True)
    user_id = fields.Many2one('res.users', string='Purchase Rep', default=lambda self: self.env.user)
    order_line = fields.One2many('custom.purchase.order.line', 'order_id', string='Order Lines')
    state = fields.Selection([('draft', 'Draft'), ('confirmed', 'Confirmed')], string='Status', default='draft')

    @api.model
    def create(self, vals):
        if vals.get('name', 'New') == 'New':
            vals['name'] = self.env['ir.sequence'].next_by_code('custom.purchase.order') or 'New'
        return super(CustomPurchaseOrder, self).create(vals)

    def action_confirm(self):
        self.write({'state': 'confirmed'})

class CustomPurchaseOrderLine(models.Model):
    _name = 'custom.purchase.order.line'
    _description = 'Custom Purchase Order Line'

    order_id = fields.Many2one('custom.purchase.order', string='Order Reference', ondelete='cascade')
    product_id = fields.Many2one('product.product', string='Product', required=True)
    product_qty = fields.Float(string='Quantity', default=1.0)
`
            },
            views: {
                name: 'views/custom_purchase_views.xml',
                lang: 'xml',
                code: `<odoo>
    <record id="view_custom_purchase_order_form" model="ir.ui.view">
        <field name="model">custom.purchase.order</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <button name="action_confirm" string="Confirm" type="object" class="oe_highlight" attrs="{'invisible': [('state', '!=', 'draft')]}"/>
                    <field name="state" widget="statusbar"/>
                </header>
                <sheet>
                    <h1><field name="name"/></h1>
                    <group>
                        <field name="partner_id"/>
                        <field name="user_id"/>
                    </group>
                    <notebook>
                        <page string="Products">
                            <field name="order_line">
                                <tree editable="bottom">
                                    <field name="product_id"/>
                                    <field name="product_qty"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>
    
    <record id="action_custom_purchase_order" model="ir.actions.act_window">
        <field name="name">Custom Purchase Orders</field>
        <field name="res_model">custom.purchase.order</field>
        <field name="view_mode">tree,form</field>
    </record>

    <menuitem id="menu_custom_purchase_root" name="Custom Purchase"/>
    <menuitem id="menu_custom_purchase_order" name="Orders" parent="menu_custom_purchase_root" action="action_custom_purchase_order"/>
</odoo>
`
            },
            security: {
                name: 'security/purchase_security.xml',
                lang: 'xml',
                code: `<odoo>
    <record id="module_category_custom_purchase" model="ir.module.category">
        <field name="name">Custom Purchase</field>
    </record>
    <record id="group_custom_purchase_user" model="res.groups">
        <field name="name">User</field>
        <field name="category_id" ref="module_category_custom_purchase"/>
        <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
    </record>
    <record id="group_custom_purchase_manager" model="res.groups">
        <field name="name">Manager</field>
        <field name="category_id" ref="module_category_custom_purchase"/>
        <field name="implied_ids" eval="[(4, ref('group_custom_purchase_user'))]"/>
    </record>

    <!-- Record Rule for User -->
    <record id="custom_purchase_order_user_rule" model="ir.rule">
        <field name="name">Custom PO User Rule</field>
        <field name="model_id" ref="model_custom_purchase_order"/>
        <field name="domain_force">[('user_id', '=', user.id)]</field>
        <field name="groups" eval="[(4, ref('group_custom_purchase_user'))]"/>
    </record>
</odoo>
`
            },
            acl: {
                name: 'security/ir.model.access.csv',
                lang: 'csv',
                code: `id,name,model_id:id,group_id:id,perm_read,perm_write,perm_create,perm_unlink
access_custom_po_user,custom.po.user,model_custom_purchase_order,group_custom_purchase_user,1,1,1,0
access_custom_po_manager,custom.po.manager,model_custom_purchase_order,group_custom_purchase_manager,1,1,1,1
access_custom_po_line_user,custom.po.line.user,model_custom_purchase_order_line,group_custom_purchase_user,1,1,1,1
`
            }
        };

        tabsContainer.innerHTML = `<div class="flex space-x-4 px-6">
            ${Object.keys(files).map(key => `
                <button class="tab-btn py-3 px-1 text-sm text-slate-500" data-tab="${key}">${files[key].name}</button>
            `).join('')}
        </div>`;
        
        contentContainer.innerHTML = Object.keys(files).map(key => `
            <div id="tab-content-${key}" class="tab-content">
                 <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code class="language-${files[key].lang}">${escapeHtml(files[key].code)}</code></pre>
                </div>
            </div>
        `).join('');

        const tabButtons = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content');

        function switchTab(tabKey) {
            tabButtons.forEach(btn => {
                btn.classList.toggle('active', btn.dataset.tab === tabKey);
            });
            tabContents.forEach(content => {
                content.classList.toggle('active', content.id === `tab-content-${tabKey}`);
            });
        }
        
        tabButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                switchTab(btn.dataset.tab);
            });
        });

        // Show first tab by default
        switchTab('models');
    }
});

function copyCode(button) {
    const codeBlock = button.nextElementSibling;
    const textToCopy = codeBlock.innerText;
    navigator.clipboard.writeText(textToCopy).then(() => {
        button.innerText = 'Copied!';
        setTimeout(() => {
            button.innerText = 'Copy';
        }, 2000);
    }).catch(err => {
        console.error('Failed to copy text: ', err);
    });
}

function escapeHtml(unsafe) {
    return unsafe
         .replace(/&/g, "&amp;")
         .replace(/</g, "&lt;")
         .replace(/>/g, "&gt;")
         .replace(/"/g, "&quot;")
         .replace(/'/g, "&#039;");
 }
</script>

</body>
</html>
