<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XINK Convention Guide - AI Development Theme</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chosen Palette: AI Dark Mode (Deep Navy, Cyan, Purple) -->
    <!-- Application Structure Plan: The SPA now presents a more sophisticated, layered architecture. The interactive tree is reordered to reflect this (models -> services -> constants -> controllers -> views). New sections for services, utils, and constants are added, promoting a clean separation of concerns. This transforms the guide from a simple convention list into an architectural best-practice manual. -->
    <!-- Visualization & Content Choices: 
        - Folder Structure: Goal: Organize/Explore -> Viz: Two-column layout with a reordered, layered architecture file tree -> Interaction: Click tree item to show corresponding detail panel -> Justification: The new order teaches a better architectural pattern (data -> logic -> presentation). Method: HTML/Tailwind/JS.
        - Service Layer: Goal: Teach Architecture -> Viz: Detailed explanation with code examples for both controller and service -> Interaction: Static reading -> Justification: Clearly illustrates the separation of concerns, which is a core concept. Method: HTML/Tailwind.
        - Other sections remain as is, supporting the overall structure.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
            background-color: #0d1117; /* GitHub Dark Dimmed */
        }
        @import url('https://rsms.me/inter/inter.css');
        .section-card {
            background-color: rgba(13, 17, 23, 0.5); /* transparent dark */
            border-radius: 0.75rem;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(56, 139, 253, 0.2);
            box-shadow: 0 0 25px rgba(56, 139, 253, 0.1);
            backdrop-filter: blur(10px);
        }
        .nav-link {
            transition: all 0.2s;
            border-bottom: 2px solid transparent;
            white-space: nowrap;
        }
        .nav-link.active, .nav-link:hover {
            color: #4ade80; /* green-400 */
            border-bottom-color: #4ade80;
        }
        .tree-nav-item {
            padding: 0.5rem 0.75rem;
            border-radius: 0.375rem;
            cursor: pointer;
            font-weight: 500;
            transition: background-color 0.2s, color 0.2s;
            border-left: 2px solid transparent;
        }
        .tree-nav-item:hover {
            background-color: rgba(30, 41, 59, 0.5);
        }
        .tree-nav-item.active {
            background-color: rgba(59, 130, 246, 0.1);
            color: #60a5fa; /* blue-400 */
            border-left-color: #60a5fa;
        }
        .detail-content { display: none; }
        .detail-content.active { display: block; }
        .tooltip { position: absolute; background-color: #1f2937; color: white; padding: 0.25rem 0.5rem; border-radius: 0.375rem; font-size: 0.75rem; display: none; bottom: 100%; left: 50%; transform: translateX(-50%); margin-bottom: 0.5rem; white-space: nowrap; }
        .copy-button:hover .tooltip { display: block; }
        code {
            background-color: rgba(59, 130, 246, 0.1);
            color: #93c5fd; /* blue-300 */
            padding: 0.125rem 0.375rem;
            border-radius: 0.25rem;
            font-size: 0.9em;
            font-family: 'Fira Code', 'Courier New', Courier, monospace;
        }
        pre code {
            background-color: transparent;
            color: inherit;
            padding: 0;
            border-radius: 0;
            font-size: inherit;
        }
        .code-block {
             background-color: #011627; /* Night Owl theme */
        }
    </style>
</head>
<body class="bg-gray-900 text-slate-300">

    <header class="bg-transparent py-6">
        <div class="container mx-auto px-4 text-center">
            <h1 class="text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-green-300 via-blue-400 to-purple-500">XINK Convention Guide</h1>
            <p class="text-slate-400 mt-2 text-lg">N·ªÅn t·∫£ng quy chu·∫©n cho c√°c d·ª± √°n AI & Development.</p>
        </div>
    </header>

    <nav class="sticky top-0 bg-gray-900/50 backdrop-blur-lg z-10 border-b border-slate-800">
        <div class="container mx-auto px-4">
            <div class="flex justify-center space-x-2 md:space-x-8">
                <a href="#structure" class="nav-link py-3 px-2 font-semibold text-slate-300">Ki·∫øn tr√∫c Module</a>
                <a href="#coding" class="nav-link py-3 px-2 font-semibold text-slate-300">Quy chu·∫©n chung</a>
                <a href="#generator" class="nav-link py-3 px-2 font-semibold text-slate-300">Code Generator</a>
            </div>
        </div>
    </nav>

    <main class="container mx-auto p-4 mt-8">
        
        <section id="structure" class="section-card">
            <h2 class="text-3xl font-bold mb-4 text-slate-100">1. Ki·∫øn tr√∫c Module & Quy t·∫Øc chi ti·∫øt</h2>
            <p class="mb-6 text-slate-400">T∆∞∆°ng t√°c v·ªõi c√¢y ki·∫øn tr√∫c b√™n tr√°i ƒë·ªÉ kh√°m ph√° c√°c quy t·∫Øc chi ti·∫øt cho t·ª´ng th√†nh ph·∫ßn. C·∫•u tr√∫c ƒë∆∞·ª£c thi·∫øt k·∫ø theo m√¥ h√¨nh ph√¢n l·ªõp ƒë·ªÉ t·ªëi ∆∞u kh·∫£ nƒÉng b·∫£o tr√¨ v√† m·ªü r·ªông.</p>
            <div class="grid grid-cols-1 md:grid-cols-12 gap-8 min-h-[500px]">
                <!-- Left Column: Tree -->
                <div class="md:col-span-4 lg:col-span-3 border-r border-slate-800 pr-4 overflow-y-auto">
                    <ul id="structure-tree" class="space-y-1">
                        <li><div class="tree-nav-item active" data-target="#details-welcome">Gi·ªõi thi·ªáu</div></li>
                        <li class="pt-2"><p class="text-xs font-semibold text-slate-500 uppercase px-2">Core Logic</p></li>
                        <li><div class="tree-nav-item" data-target="#details-manifest">üìÑ __manifest__.py</div></li>
                        <li><div class="tree-nav-item" data-target="#details-models">üìÅ models/</div></li>
                        <li><div class="tree-nav-item" data-target="#details-service">üìÅ service/</div></li>
                        <li><div class="tree-nav-item" data-target="#details-constant">üìÅ constant/</div></li>
                        <li><div class="tree-nav-item" data-target="#details-utils">üìÅ utils/</div></li>
                        <li class="pt-2"><p class="text-xs font-semibold text-slate-500 uppercase px-2">Presentation & UI</p></li>
                        <li><div class="tree-nav-item" data-target="#details-controllers">üìÅ controllers/</div></li>
                        <li><div class="tree-nav-item" data-target="#details-views">üìÅ views/</div></li>
                        <li><div class="tree-nav-item" data-target="#details-wizard">üìÅ wizard/</div></li>
                        <li><div class="tree-nav-item" data-target="#details-static">üìÅ static/</div></li>
                        <li class="pt-2"><p class="text-xs font-semibold text-slate-500 uppercase px-2">Configuration</p></li>
                        <li><div class="tree-nav-item" data-target="#details-security">üìÅ security/</div></li>
                        <li><div class="tree-nav-item" data-target="#details-data">üìÅ data/</div></li>
                    </ul>
                </div>
                <!-- Right Column: Details -->
                <div id="structure-details" class="md:col-span-8 lg:col-span-9">
                    <div id="details-welcome" class="detail-content active space-y-4">
                         <h3 class="text-2xl font-bold text-slate-100">Ki·∫øn tr√∫c ph·∫ßn m·ªÅm h∆∞·ªõng d·ªãch v·ª•</h3>
                         <p>T√†i li·ªáu n√†y ƒë·ªãnh h∆∞·ªõng vi·ªác x√¢y d·ª±ng module Odoo theo ki·∫øn tr√∫c hi·ªán ƒë·∫°i, t·∫≠p trung v√†o s·ª± r√µ r√†ng, d·ªÖ b·∫£o tr√¨ v√† kh·∫£ nƒÉng m·ªü r·ªông.</p>
                         <p>M·ªçi t√†i s·∫£n (asset) t·∫°o m·ªõi trong module (t√™n model, ID record,...) ph·∫£i s·ª≠ d·ª•ng ti·ªÅn t·ªë <code>xink_</code> ƒë·ªÉ ƒë·∫£m b·∫£o t√≠nh duy nh·∫•t v√† nh·∫•t qu√°n.</p>
                         <ul class="list-disc list-inside space-y-2 pl-4 text-slate-400">
                             <li><strong>T√°ch bi·ªát Tr√°ch nhi·ªám (Separation of Concerns):</strong> Logic nghi·ªáp v·ª• ƒë∆∞·ª£c t√°ch kh·ªèi t·∫ßng giao di·ªán (controller) v√† t·∫ßng d·ªØ li·ªáu (model) th√¥ng qua c√°c l·ªõp <strong>Service</strong>.</li>
                             <li><strong>D·ªÖ d√†ng B·∫£o tr√¨:</strong> Vi·ªác thay ƒë·ªïi nghi·ªáp v·ª• ch·ªâ c·∫ßn c·∫≠p nh·∫≠t ·ªü Service m√† kh√¥ng ·∫£nh h∆∞·ªüng ƒë·∫øn c√°c th√†nh ph·∫ßn kh√°c.</li>
                             <li><strong>Kh·∫£ nƒÉng T√°i s·ª≠ d·ª•ng:</strong> C√°c h√†m ti·ªán √≠ch (utils) v√† h·∫±ng s·ªë (constants) ƒë∆∞·ª£c qu·∫£n l√Ω t·∫≠p trung, d·ªÖ d√†ng t√°i s·ª≠ d·ª•ng trong to√†n b·ªô d·ª± √°n.</li>
                         </ul>
                    </div>
                    <div id="details-manifest" class="detail-content space-y-4">...</div>
                    <div id="details-models" class="detail-content space-y-4">...</div>
                    <div id="details-views" class="detail-content space-y-4">...</div>
                    <div id="details-security" class="detail-content space-y-4">...</div>
                    <div id="details-service" class="detail-content space-y-4">...</div>
                    <div id="details-constant" class="detail-content space-y-4">...</div>
                    <div id="details-utils" class="detail-content space-y-4">...</div>
                    <div id="details-controllers" class="detail-content space-y-4">...</div>
                    <div id="details-data" class="detail-content space-y-4">...</div>
                    <div id="details-static" class="detail-content space-y-4">...</div>
                    <div id="details-wizard" class="detail-content space-y-4">...</div>
                </div>
            </div>
        </section>

        <section id="coding" class="section-card">
            <h2 class="text-3xl font-bold mb-4 text-slate-100">2. Quy chu·∫©n chung</h2>
             <p class="mb-6 text-slate-400">C√°c quy t·∫Øc chung v·ªÅ style v√† c√∫ ph√°p c·∫ßn tu√¢n th·ªß trong to√†n b·ªô d·ª± √°n.</p>
             <ul class="space-y-3 text-slate-300 list-disc list-inside">
                <li><strong>Python:</strong> Tu√¢n th·ªß nghi√™m ng·∫∑t <strong>PEP 8</strong>. S·∫Øp x·∫øp import theo th·ª© t·ª±: th∆∞ vi·ªán chu·∫©n Python ‚Üí th∆∞ vi·ªán b√™n th·ª© ba ‚Üí Odoo core ‚Üí Odoo addons.</li>
                <li><strong>XML:</strong> Th·ª•t l·ªÅ b·∫±ng 2 d·∫•u c√°ch. Nh√≥m c√°c record c√≥ li√™n quan logic l·∫°i v·ªõi nhau.</li>
                <li><strong>T√™n bi·∫øn/h√†m (Python):</strong> D√πng <code>snake_case</code> (v√≠ d·ª•: <code>my_variable</code>, <code>_compute_total()</code>).</li>
                <li><strong>Docstring (Python):</strong> C√°c h√†m public ho·∫∑c c√≥ logic ph·ª©c t·∫°p ph·∫£i c√≥ docstring gi·∫£i th√≠ch r√µ r√†ng.</li>
             </ul>
        </section>
        
        <section id="generator" class="section-card">
            <h2 class="text-3xl font-bold mb-4 text-slate-100">3. Code Generator</h2>
            <p class="mb-6 text-slate-400">Nh·∫≠p c√°c th√¥ng s·ªë ƒë·ªÉ kh·ªüi t·∫°o nhanh c·∫•u tr√∫c c∆° b·∫£n cho module m·ªõi.</p>
            <div class="grid md:grid-cols-2 gap-8">
                <div>
                    <label for="module-function" class="block text-sm font-medium text-slate-300 mb-1">T√™n ch·ª©c nƒÉng (ti·∫øng Anh)</label>
                    <input type="text" id="module-function" placeholder="VD: AI Content Generation" class="w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-md shadow-sm focus:outline-none focus:ring-green-400 focus:border-green-400">
                </div>
                <div>
                    <label for="module-deps" class="block text-sm font-medium text-slate-300 mb-1">Module ph·ª• thu·ªôc (ph√¢n c√°ch b·∫±ng d·∫•u ph·∫©y)</label>
                    <input type="text" id="module-deps" placeholder="VD: web, mail" class="w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-md shadow-sm focus:outline-none focus:ring-green-400 focus:border-green-400">
                </div>
            </div>

            <div class="mt-8">
                <h3 class="font-semibold text-lg mb-2 text-slate-100">K·∫øt qu·∫£:</h3>
                <div class="space-y-4">
                    <div>
                        <p class="text-sm font-medium text-slate-400">T√™n k·ªπ thu·∫≠t module:</p>
                        <p id="output-module-name" class="p-3 bg-slate-800 rounded-md font-mono text-green-300">xink_...</p>
                    </div>
                    <div>
                        <p class="text-sm font-medium text-slate-400">N·ªôi dung `__manifest__.py`:</p>
                        <div class="code-block rounded-lg overflow-hidden">
                            <pre class="p-4 text-sm text-slate-300 overflow-x-auto"><code id="output-manifest"># Vui l√≤ng nh·∫≠p t√™n ch·ª©c nƒÉng...</code></pre>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="text-center py-8 mt-8 border-t border-slate-800">
        <p class="text-sm text-slate-500">&copy; 2025 Xink Tech - Xink SJG. AI-Powered Development Standards.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const detailContentsMap = {
                "details-welcome": `<h3 class="text-2xl font-bold text-slate-100">Ki·∫øn tr√∫c ph·∫ßn m·ªÅm h∆∞·ªõng d·ªãch v·ª•</h3><p class="text-slate-400">T√†i li·ªáu n√†y ƒë·ªãnh h∆∞·ªõng vi·ªác x√¢y d·ª±ng module Odoo theo ki·∫øn tr√∫c hi·ªán ƒë·∫°i, t·∫≠p trung v√†o s·ª± r√µ r√†ng, d·ªÖ b·∫£o tr√¨ v√† kh·∫£ nƒÉng m·ªü r·ªông.</p><p class="text-slate-300">M·ªçi t√†i s·∫£n (asset) t·∫°o m·ªõi trong module (t√™n model, ID record,...) ph·∫£i s·ª≠ d·ª•ng ti·ªÅn t·ªë <code>xink_</code> ƒë·ªÉ ƒë·∫£m b·∫£o t√≠nh duy nh·∫•t v√† nh·∫•t qu√°n.</p><ul class="list-disc list-inside space-y-2 pl-4 text-slate-400"><li><strong>T√°ch bi·ªát Tr√°ch nhi·ªám (Separation of Concerns):</strong> Logic nghi·ªáp v·ª• ƒë∆∞·ª£c t√°ch kh·ªèi t·∫ßng giao di·ªán (controller) v√† t·∫ßng d·ªØ li·ªáu (model) th√¥ng qua c√°c l·ªõp <strong>Service</strong>.</li><li><strong>D·ªÖ d√†ng B·∫£o tr√¨:</strong> Vi·ªác thay ƒë·ªïi nghi·ªáp v·ª• ch·ªâ c·∫ßn c·∫≠p nh·∫≠t ·ªü Service m√† kh√¥ng ·∫£nh h∆∞·ªüng ƒë·∫øn c√°c th√†nh ph·∫ßn kh√°c.</li><li><strong>Kh·∫£ nƒÉng T√°i s·ª≠ d·ª•ng:</strong> C√°c h√†m ti·ªán √≠ch (utils) v√† h·∫±ng s·ªë (constants) ƒë∆∞·ª£c qu·∫£n l√Ω t·∫≠p trung, d·ªÖ d√†ng t√°i s·ª≠ d·ª•ng trong to√†n b·ªô d·ª± √°n.</li></ul>`,
                "details-manifest": `<h3 class="text-xl font-bold text-slate-100">üìÑ __manifest__.py</h3><p class="text-slate-400"><strong>M·ª•c ƒë√≠ch:</strong> L√† file "linh h·ªìn" c·ªßa module, khai b√°o m·ªçi th√¥ng tin, dependencies, v√† danh s√°ch c√°c file (xml, csv) c·∫ßn ƒë∆∞·ª£c load.</p><h4 class="font-semibold text-slate-200 mt-4">Quy t·∫Øc t√™n module:</h4><p class="text-slate-400">T√™n k·ªπ thu·∫≠t c·ªßa module ph·∫£i theo m·∫´u <code>xink_&lt;t√™n_ch·ª©c_nƒÉng&gt;</code>. V√≠ d·ª•: <code>xink_sale_approval</code>.</p><h4 class="font-semibold text-slate-200 mt-4">L∆∞u √Ω quan tr·ªçng:</h4><ul class="list-disc list-inside pl-4 text-slate-400"><li>Hai key <code>'author': "Xink Tech - Xink SJG"</code> v√† <code>'category': 'Tools'</code> l√† b·∫Øt bu·ªôc v√† kh√¥ng thay ƒë·ªïi.</li><li>Th·ª© t·ª± c√°c file trong key <code>'data'</code> r·∫•t quan tr·ªçng, tu√¢n th·ªß: <strong>security ‚Üí data ‚Üí wizard ‚Üí views ‚Üí report ‚Üí menu</strong>.</li></ul>`,
                "details-models": `<h3 class="text-xl font-bold text-slate-100">üìÅ models/</h3><p class="text-slate-400"><strong>M·ª•c ƒë√≠ch:</strong> Ch·ª©a logic business c∆° b·∫£n, ƒë·ªãnh nghƒ©a c·∫•u tr√∫c d·ªØ li·ªáu c·ªßa Odoo.</p><h4 class="font-semibold text-slate-200 mt-4">Quy t·∫Øc ƒë·∫∑t t√™n file:</h4><p class="text-slate-400">T√™n file n√™n tr√πng v·ªõi t√™n model ch√≠nh b√™n trong, vi·∫øt b·∫±ng snake_case. V√≠ d·ª•: model <code>sale.order</code> ƒë∆∞·ª£c m·ªü r·ªông trong file <code>sale_order.py</code>.</p><h4 class="font-semibold text-slate-200 mt-4">Quy t·∫Øc trong code:</h4><ul class="list-disc list-inside pl-4 text-slate-400"><li>T√™n class: <code>PascalCase</code> (v√≠ d·ª•: <code>XinkSubscription</code>).</li><li>T√™n model (<code>_name</code>): B·∫Øt ƒë·∫ßu b·∫±ng ti·ªÅn t·ªë <code>xink.</code>. V√≠ d·ª•: <code>_name = 'xink.subscription'</code>.</li></ul>`,
                "details-views": `<h3 class="text-xl font-bold text-slate-100">üìÅ views/</h3><p class="text-slate-400"><strong>M·ª•c ƒë√≠ch:</strong> Ch·ª©a c√°c file XML ƒë·ªãnh nghƒ©a giao di·ªán ng∆∞·ªùi d√πng nh∆∞ views, menu items v√† actions.</p><h4 class="font-semibold text-slate-200 mt-4">Quy t·∫Øc ƒë·∫∑t t√™n file:</h4><ul class="list-disc list-inside pl-4 text-slate-400"><li>Views: <code>&lt;model_name&gt;_views.xml</code> (v√≠ d·ª•: <code>xink_subscription_views.xml</code>).</li><li>Menus: <code>&lt;module_name&gt;_menus.xml</code> (v√≠ d·ª•: <code>xink_subscription_menus.xml</code>).</li></ul><h4 class="font-semibold text-slate-200 mt-4">Quy t·∫Øc ƒë·∫∑t ID Record XML:</h4><ul class="list-disc list-inside pl-4 text-slate-400"><li>View: <code>xink_&lt;model_name_underscored&gt;_view_&lt;type&gt;</code> (v√≠ d·ª•: <code>id="xink_subscription_view_form"</code>).</li><li>Action: <code>xink_&lt;model_name_underscored&gt;_action</code> (v√≠ d·ª•: <code>id="xink_subscription_action"</code>).</li><li>Menu: <code>xink_&lt;t√™n_logic&gt;_menu</code> (v√≠ d·ª•: <code>id="xink_subscription_main_menu"</code>).</li></ul>`,
                "details-security": `<h3 class="text-xl font-bold text-slate-100">üìÅ security/</h3><p class="text-slate-400"><strong>M·ª•c ƒë√≠ch:</strong> Ch·ª©a c√°c thi·∫øt l·∫≠p v·ªÅ b·∫£o m·∫≠t, ph√¢n quy·ªÅn.</p><h4 class="font-semibold text-slate-200 mt-4">Quy t·∫Øc ƒë·∫∑t t√™n file:</h4><ul class="list-disc list-inside pl-4 text-slate-400"><li><strong>B·∫Øt bu·ªôc:</strong> <code>ir.model.access.csv</code> ƒë·ªÉ ƒë·ªãnh nghƒ©a quy·ªÅn truy c·∫≠p (ACL) cho c√°c model.</li><li>Groups v√† Rules: <code>&lt;module_name&gt;_security.xml</code> (v√≠ d·ª•: <code>xink_sale_approval_security.xml</code>).</li></ul><h4 class="font-semibold text-slate-200 mt-4">Quy t·∫Øc ƒë·∫∑t ID Record XML:</h4><ul class="list-disc list-inside pl-4 text-slate-400"><li>Group: <code>xink_&lt;t√™n_logic&gt;_group</code> (v√≠ d·ª•: <code>id="xink_subscription_user_group"</code>).</li><li>Record Rule: <code>xink_&lt;model_name&gt;_rule_&lt;t√™n_logic&gt;</code> (v√≠ d·ª•: <code>id="xink_subscription_rule_own"</code>).</li></ul>`,
                "details-service": `<div class="space-y-4"><h3 class="text-xl font-bold text-slate-100">üìÅ service/</h3><p class="text-slate-400"><strong>M·ª•c ƒë√≠ch:</strong> Ch·ª©a c√°c l·ªõp Service, n∆°i x·ª≠ l√Ω ch√≠nh c√°c logic nghi·ªáp v·ª• ph·ª©c t·∫°p. T√°ch bi·ªát business logic kh·ªèi t·∫ßng presentation (controller) v√† t·∫ßng data (model).</p><h4 class="font-semibold text-slate-200 mt-4">Quy t·∫Øc ƒë·∫∑t t√™n file:</h4><p class="text-slate-400"><code>&lt;t√™n_logic&gt;_service.py</code>. V√≠ d·ª•: <code>subscription_service.py</code>.</p><h4 class="font-semibold text-slate-200 mt-4">Quy t·∫Øc trong code:</h4><ul class="list-disc list-inside pl-4 text-slate-400"><li>T√™n class: <code>PascalCase</code> + Service. V√≠ d·ª•: <code>SubscriptionService</code>.</li><li>Service kh√¥ng k·∫ø th·ª´a t·ª´ class n√†o c·ªßa Odoo, l√† m·ªôt l·ªõp Python thu·∫ßn.</li><li>H√†m kh·ªüi t·∫°o (<code>__init__</code>) nh·∫≠n <code>env</code> ƒë·ªÉ c√≥ th·ªÉ t∆∞∆°ng t√°c v·ªõi c√°c model.</li><li>Controller s·∫Ω kh·ªüi t·∫°o v√† g·ªçi c√°c ph∆∞∆°ng th·ª©c c·ªßa Service ƒë·ªÉ th·ª±c thi nghi·ªáp v·ª•.</li></ul></div>`,
                "details-constant": `<div class="space-y-4"><h3 class="text-xl font-bold text-slate-100">üìÅ constant/</h3><p class="text-slate-400"><strong>M·ª•c ƒë√≠ch:</strong> L∆∞u tr·ªØ c√°c gi√° tr·ªã kh√¥ng ƒë·ªïi (h·∫±ng s·ªë) c·ªßa module nh∆∞ URL, th√¥ng b√°o l·ªói, tr·∫°ng th√°i,... gi√∫p d·ªÖ qu·∫£n l√Ω v√† thay ƒë·ªïi.</p><h4 class="font-semibold text-slate-200 mt-4">Quy t·∫Øc ƒë·∫∑t t√™n file:</h4><p class="text-slate-400">T√™n file th·ªÉ hi·ªán lo·∫°i h·∫±ng s·ªë. V√≠ d·ª•: <code>message.py</code>, <code>route.py</code>.</p><h4 class="font-semibold text-slate-200 mt-4">Quy t·∫Øc trong code:</h4><ul class="list-disc list-inside pl-4 text-slate-400"><li>T√™n bi·∫øn h·∫±ng s·ªë: VI·∫æT HOA TO√ÄN B·ªò. V√≠ d·ª•: <code>CANCEL_SUCCESS_MSG = "H·ªßy th√†nh c√¥ng!"</code>.</li><li>S·ª≠ d·ª•ng <code>__init__.py</code> trong folder <code>constant</code> ƒë·ªÉ import c√°c h·∫±ng s·ªë, gi√∫p vi·ªác g·ªçi d·ªÖ d√†ng h∆°n.</li></ul></div>`,
                "details-utils": `<div class="space-y-4"><h3 class="text-xl font-bold text-slate-100">üìÅ utils/</h3><p class="text-slate-400"><strong>M·ª•c ƒë√≠ch:</strong> Ch·ª©a c√°c h√†m ti·ªán √≠ch c√≥ th·ªÉ t√°i s·ª≠ d·ª•ng trong to√†n b·ªô module, kh√¥ng thu·ªôc v·ªÅ m·ªôt logic nghi·ªáp v·ª• c·ª• th·ªÉ n√†o.</p><h4 class="font-semibold text-slate-200 mt-4">Quy t·∫Øc ƒë·∫∑t t√™n file:</h4><p class="text-slate-400">T√™n file th·ªÉ hi·ªán ch·ª©c nƒÉng ti·ªán √≠ch. V√≠ d·ª•: <code>datetime_utils.py</code>, <code>format_utils.py</code>.</p></div>`,
                "details-controllers": `<div class="space-y-4"><h3 class="text-xl font-bold text-slate-100">üìÅ controllers/</h3><p class="text-slate-400"><strong>M·ª•c ƒë√≠ch:</strong> X·ª≠ l√Ω c√°c HTTP request, t·∫°o trang web c√¥ng khai, portal cho kh√°ch h√†ng, ho·∫∑c API endpoints.</p><h4 class="font-semibold text-slate-200 mt-4">Quy t·∫Øc ƒë·∫∑t t√™n file:</h4><p class="text-slate-400"><code>main.py</code> cho c√°c route ch√≠nh. C√°c file kh√°c n√™n ƒë·∫∑t theo ch·ª©c nƒÉng, v√≠ d·ª• <code>portal.py</code>, <code>api.py</code>.</p><h4 class="font-semibold text-slate-200 mt-4">Ki·∫øn tr√∫c khuy·∫øn ngh·ªã:</h4><p class="text-slate-400">Controller n√™n l√† m·ªôt l·ªõp m·ªèng, ch·ªâ th·ª±c hi·ªán:<ul class="list-disc list-inside pl-4"><li>Nh·∫≠n v√† x√°c th·ª±c (validate) d·ªØ li·ªáu t·ª´ request.</li><li>G·ªçi ƒë·∫øn c√°c l·ªõp <strong>Service</strong> ƒë·ªÉ x·ª≠ l√Ω logic nghi·ªáp v·ª•.</li><li>Tr·∫£ v·ªÅ response (render template, redirect, ho·∫∑c tr·∫£ JSON).</li></ul><p class="text-amber-300"><strong>KH√îNG</strong> ch·ª©a business logic ph·ª©c t·∫°p trong controller.</p></div>`,
                "details-data": `<h3 class="text-xl font-bold text-slate-100">üìÅ data/</h3><p class="text-slate-400"><strong>M·ª•c ƒë√≠ch:</strong> Ch·ª©a c√°c file d·ªØ li·ªáu ƒë∆∞·ª£c kh·ªüi t·∫°o m·ªôt l·∫ßn khi c√†i ƒë·∫∑t ho·∫∑c c·∫≠p nh·∫≠t module (v√≠ d·ª•: sequences, mail templates, scheduled actions).</p><h4 class="font-semibold text-slate-200 mt-4">Quy t·∫Øc ƒë·∫∑t t√™n file:</h4><p class="text-slate-400">ƒê·∫∑t t√™n theo m·ª•c ƒë√≠ch d·ªØ li·ªáu, v√≠ d·ª• <code>mail_template_data.xml</code>, <code>xink_subscription_sequence_data.xml</code>.</p><h4 class="font-semibold text-slate-200 mt-4">Quy t·∫Øc ƒë·∫∑t ID Record XML:</h4><p class="text-slate-400">ID ph·∫£i th·ªÉ hi·ªán r√µ record v√† c√≥ ti·ªÅn t·ªë logic. V√≠ d·ª•: <code>seq_xink_subscription</code>, <code>mail_template_xink_subscription_welcome</code>.</p><h4 class="font-semibold text-slate-200 mt-4">L∆∞u √Ω quan tr·ªçng:</h4><p class="text-slate-400">S·ª≠ d·ª•ng <code>noupdate="1"</code> cho c√°c record m√† ng∆∞·ªùi d√πng c√≥ th·ªÉ ƒë√£ s·ª≠a ƒë·ªïi ƒë·ªÉ tr√°nh b·ªã ghi ƒë√® khi c·∫≠p nh·∫≠t module.</p>`,
                "details-static": `<h3 class="text-xl font-bold text-slate-100">üìÅ static/</h3><p class="text-slate-400"><strong>M·ª•c ƒë√≠ch:</strong> Ch·ª©a c√°c file tƒ©nh kh√¥ng ƒë∆∞·ª£c Odoo x·ª≠ l√Ω nh∆∞ CSS, JavaScript, h√¨nh ·∫£nh, font ch·ªØ.</p><h4 class="font-semibold text-slate-200 mt-4">C·∫•u tr√∫c th∆∞ m·ª•c con:</h4><p class="text-slate-400">Lu√¥n tu√¢n th·ªß c·∫•u tr√∫c <code>src/css/</code>, <code>src/js/</code>, <code>src/xml/</code> (cho QWeb JS), <code>src/img/</code>. Icon c·ªßa module ph·∫£i ƒë∆∞·ª£c ƒë·∫∑t t·∫°i <code>static/description/icon.png</code>.</p><h4 class="font-semibold text-slate-200 mt-4">Quy t·∫Øc trong code (JS):</h4><p class="text-slate-400">To√†n b·ªô code Javascript ph·∫£i ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a b√™n trong <code>odoo.define(...)</code>. S·ª≠ d·ª•ng <code>'use strict';</code> ·ªü ƒë·∫ßu m·ªói block.</p>`,
                "details-wizard": `<h3 class="text-xl font-bold text-slate-100">üìÅ wizard/</h3><p class="text-slate-400"><strong>M·ª•c ƒë√≠ch:</strong> Ch·ª©a logic v√† view cho c√°c wizard (h·ªôp tho·∫°i pop-up), s·ª≠ d·ª•ng <code>models.TransientModel</code>.</p><h4 class="font-semibold text-slate-200 mt-4">Quy t·∫Øc ƒë·∫∑t t√™n file:</h4><p class="text-slate-400">T√™n file python v√† xml ph·∫£i t∆∞∆°ng ·ª©ng v·ªõi nhau. V√≠ d·ª•: <code>cancel_subscription_wizard.py</code> v√† <code>cancel_subscription_wizard_views.xml</code>.</p><h4 class="font-semibold text-slate-200 mt-4">Quy t·∫Øc trong code:</h4><ul class="list-disc list-inside pl-4 text-slate-400"><li>K·∫ø th·ª´a t·ª´ <code>models.TransientModel</code>.</li><li>T√™n model (<code>_name</code>): <code>xink.wizard.&lt;t√™n_logic&gt;</code>. V√≠ d·ª•: <code>_name = 'xink.wizard.cancel.subscription'</code>.</li><li>T√™n h√†m action: Ph·∫£i b·∫Øt ƒë·∫ßu b·∫±ng <code>action_</code>, v√≠ d·ª•: <code>def action_confirm(self): ...</code>.</li></ul><h4 class="font-semibold text-slate-200 mt-4">Quy t·∫Øc ƒë·∫∑t ID Record XML:</h4><p class="text-slate-400">T∆∞∆°ng t·ª± nh∆∞ view: <code>xink_wizard_&lt;t√™n_logic&gt;_view_form</code>.</p>`
            };
            
            for (const id in detailContentsMap) {
                document.getElementById(id).innerHTML = detailContentsMap[id];
            }

            const treeNavItems = document.querySelectorAll('.tree-nav-item');
            const detailContents = document.querySelectorAll('.detail-content');

            treeNavItems.forEach(item => {
                item.addEventListener('click', () => {
                    treeNavItems.forEach(i => i.classList.remove('active'));
                    item.classList.add('active');

                    const targetId = item.dataset.target;
                    detailContents.forEach(content => {
                        content.classList.remove('active');
                        if ('#' + content.id === targetId) {
                            content.classList.add('active');
                        }
                    });
                });
            });
            
            const functionInput = document.getElementById('module-function');
            const depsInput = document.getElementById('module-deps');
            const outputModuleName = document.getElementById('output-module-name');
            const outputManifest = document.getElementById('output-manifest');

            function generate() {
                const functionName = functionInput.value.trim();
                const deps = depsInput.value.trim().split(',')
                                    .map(d => `'${d.trim()}'`)
                                    .filter(d => d !== "''")
                                    .join(', ');
                if (!functionName) {
                    outputModuleName.innerText = 'xink_...';
                    outputManifest.innerText = '# Vui l√≤ng nh·∫≠p t√™n ch·ª©c nƒÉng...';
                    return;
                }
                const snakeCaseName = functionName.toLowerCase().replace(/\s+/g, '_').replace(/[^a-z0-9_]/g, '');
                const finalModuleName = `xink_${snakeCaseName}`;
                outputModuleName.innerText = finalModuleName;
                const manifestTemplate = `# -*- coding: utf-8 -*-
{
    'name': "XINK - ${functionName}",
    'summary': """M√¥ t·∫£ ng·∫Øn g·ªçn ch·ª©c nƒÉng c·ªßa module.""",
    'author': "Xink Tech - Xink SJG",
    'category': 'Tools',
    'version': '17.0.1.0.0',
    'depends': [${deps ? `'base', ${deps}` : "'base'"}],
    'data': [
        'security/ir.model.access.csv',
        'views/views.xml',
    ],
    'installable': True,
}`;
                outputManifest.innerText = manifestTemplate;
            }
            functionInput.addEventListener('input', generate);
            depsInput.addEventListener('input', generate);
        });
    </script>
</body>
</html>
